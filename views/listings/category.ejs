<% layout('/layouts/boilerplate') %>
<style>
    .back-btn {
        background: none;
        border: none;
        font-size: 1.1rem;
        color: #fe424d;
        font-weight: 600;
        padding-left: 0;
    }
    .back-btn:hover {
        opacity: 0.7;
        cursor: pointer;
    }

    .category-title {
        font-weight: 500;
        font-size: 2rem;
    }

    .category-subtitle {
        color: #717171;
        margin-top: -5px;
        font-size: 1rem;
    }

    .no-listing-msg {
        font-size: 1.2rem;
        font-weight: 500;
        color: #fe424d;
        margin-top: 20px;
    }

    /* Matching Airbnb Cards */
    .listing-card {
        transition: transform 0.2s ease;
        border-radius: 15px;
        overflow: hidden;
    }

    .listing-card:hover {
        transform: scale(1.02);
    }

    .listing-img {
        height: 20rem;
        width: 100%;
        object-fit: cover;
        border-radius: 15px;
    }
    .no-listing-msg {
    margin-top: 2rem;
    padding: 2rem;
    width: 100%;
    text-align: center;

    background: #fff;
    border: 1px solid #eee;
    border-radius: 20px;

    font-size: 1.2rem;
    color: #444;

    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    animation: fadeIn 0.4s ease-in-out;
}

.no-listing-msg i {
    font-size: 2rem;
    color: #fe424d;     /* Airbnb red */
    margin-bottom: 0.5rem;
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
}

</style>
<div class="container mt-2">

    <a href="/listings">
        <button class="back-btn mb-3">
            <i class="fa-solid fa-caret-left"></i> Back
        </button>
    </a>

    <h2 class="category-title">Category: <%= category %></h2>
    <p class="category-subtitle">Explore listings curated under this category</p>

    <% if (listings.length === 0) { %>

        <div class="alert no-listing-msg" role="alert">
           No listings found in this category yet.
        </div>
    <% } else { %>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 mt-3">
            <% listings.forEach(listing => { %>
                <div class="col mb-4">
                    <a href="/listings/<%= listing._id %>" style="text-decoration: none; color: inherit;">
                        <div class="listing-card card listing-card col shadow-sm p-3 mb-5 bg-body-dark rounded-2">
                            <img
                                src="<%= listing.image.url %>"
                                class="listing-img card-img-top shadow-sm p-3 mb-5 bg-body-tertiary rounded"
                                alt="<%= listing.title %>" style="height: 20rem;"
                            />

                            <div class="card-body">
                                <p class="card-text"><b><%= listing.title %></b></p>
                                <p class="card-text"><%= listing.location %>, <%= listing.country %></p>
                                <p> &#x20B9; <%= listing.price.toLocaleString("en-IN") %>/ night </p>
                            </div>
                        </div>
                    </a>
                </div>
            <% }) %>
        </div>

    <% } %>

</div>
